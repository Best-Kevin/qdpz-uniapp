(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["tn_components/sign"],{235:
/*!****************************************************************************************!*\
  !*** /Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/main.js?{"page":"tn_components%2Fsign"} ***!
  \****************************************************************************************/
/*! no static exports found */function(t,e,i){"use strict";(function(t){i(/*! uni-pages */4);n(i(/*! vue */2));var e=n(i(/*! ./tn_components/sign.vue */236));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},236:
/*!***********************************************************************!*\
  !*** /Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue ***!
  \***********************************************************************/
/*! no static exports found */function(t,e,i){"use strict";i.r(e);var n=i(/*! ./sign.vue?vue&type=template&id=1fd28adf& */237),a=i(/*! ./sign.vue?vue&type=script&lang=js& */239);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i(/*! ./sign.vue?vue&type=style&index=0&lang=css& */241);var r,c=i(/*! ../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),o=Object(c["default"])(a["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);o.options.__file="tn_components/sign.vue",e["default"]=o.exports},237:
/*!******************************************************************************************************!*\
  !*** /Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue?vue&type=template&id=1fd28adf& ***!
  \******************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,i){"use strict";i.r(e);var n=i(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sign.vue?vue&type=template&id=1fd28adf& */238);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},238:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue?vue&type=template&id=1fd28adf& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return a})),i.d(e,"staticRenderFns",(function(){return r})),i.d(e,"recyclableRender",(function(){return s})),i.d(e,"components",(function(){return n}));var a=function(){var t=this,e=t.$createElement;t._self._c},s=!1,r=[];a._withStripped=!0},239:
/*!************************************************************************************************!*\
  !*** /Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************/
/*! no static exports found */function(t,e,i){"use strict";i.r(e);var n=i(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sign.vue?vue&type=script&lang=js& */240),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},240:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{canvasName:"handWriting",ctx:"",canvasWidth:0,canvasHeight:0,transparent:1,selectColor:"black",lineColor:"#1A1A1A",lineSize:1.5,lineMin:.5,lineMax:4,pressure:1,smoothness:60,currentPoint:{},currentLine:[],firstTouch:!0,radius:1,cutArea:{top:0,right:0,bottom:0,left:0},bethelPoint:[],lastPoint:0,chirography:[],currentChirography:{},linePrack:[]}},onLoad:function(){var t=this,e=this.canvasName,i=wx.createCanvasContext(e);this.ctx=i;var n=wx.createSelectorQuery();n.select(".handCenter").boundingClientRect((function(e){t.canvasWidth=e.width,t.canvasHeight=e.height,t.setCanvasBg("#fff")})).exec()},methods:{uploadScaleStart:function(t){if("touchstart"!=t.type)return!1;var e=this.ctx;e.setFillStyle(this.lineColor),e.setGlobalAlpha(this.transparent);var i={x:t.touches[0].x,y:t.touches[0].y},n=this.currentLine;n.unshift({time:(new Date).getTime(),dis:0,x:i.x,y:i.y}),this.currentPoint=i,this.firstTouch&&(this.cutArea={top:i.y,right:i.x,bottom:i.y,left:i.x},this.firstTouch=!1),this.pointToLine(n)},uploadScaleMove:function(t){if("touchmove"!=t.type)return!1;t.cancelable&&(t.defaultPrevented||t.preventDefault());var e={x:t.touches[0].x,y:t.touches[0].y};e.y<this.cutArea.top&&(this.cutArea.top=e.y),e.y<0&&(this.cutArea.top=0),e.x>this.cutArea.right&&(this.cutArea.right=e.x),this.canvasWidth-e.x<=0&&(this.cutArea.right=this.canvasWidth),e.y>this.cutArea.bottom&&(this.cutArea.bottom=e.y),this.canvasHeight-e.y<=0&&(this.cutArea.bottom=this.canvasHeight),e.x<this.cutArea.left&&(this.cutArea.left=e.x),e.x<0&&(this.cutArea.left=0),this.lastPoint=this.currentPoint,this.currentPoint=e;var i=this.currentLine;i.unshift({time:(new Date).getTime(),dis:this.distance(this.currentPoint,this.lastPoint),x:e.x,y:e.y}),this.pointToLine(i)},uploadScaleEnd:function(t){if("touchend"!=t.type)return 0;var e={x:t.changedTouches[0].x,y:t.changedTouches[0].y};this.lastPoint=this.currentPoint,this.currentPoint=e;var i=this.currentLine;if(i.unshift({time:(new Date).getTime(),dis:this.distance(this.currentPoint,this.lastPoint),x:e.x,y:e.y}),i.length>2)i[0].time,i[i.length-1].time,i.length;this.pointToLine(i);var n={lineSize:this.lineSize,lineColor:this.lineColor},a=this.chirography;a.unshift(n),this.chirography=a;var s=this.linePrack;s.unshift(this.currentLine),this.linePrack=s,this.currentLine=[]},retDraw:function(){this.ctx.clearRect(0,0,700,730),this.ctx.draw(),this.setCanvasBg("#fff")},pointToLine:function(t){this.calcBethelLine(t)},calcBethelLine:function(t){if(t.length<=1)t[0].r=this.radius;else{var e,i,n,a,s,r,c,o,u,h,l=0,f=0,x=.5;t.length<=2?(e=t[1].x,a=t[1].y,n=t[1].x+(t[0].x-t[1].x)*x,r=t[1].y+(t[0].y-t[1].y)*x,i=e+(n-e)*x,s=a+(r-a)*x):(e=t[2].x+(t[1].x-t[2].x)*x,a=t[2].y+(t[1].y-t[2].y)*x,i=t[1].x,s=t[1].y,n=i+(t[0].x-i)*x,r=s+(t[0].y-s)*x),u=this.distance({x:n,y:r},{x:e,y:a}),h=this.radius;for(var d=0;d<t.length-1;d++)if(l+=t[d].dis,f+=t[d].time-t[d+1].time,l>this.smoothness)break;this.radius=Math.min(f/u*this.pressure+this.lineMin,this.lineMax)*this.lineSize,t[0].r=this.radius,t.length<=2?(c=(h+this.radius)/2,o=c,o):(c=(t[2].r+t[1].r)/2,o=t[1].r,(t[1].r+t[0].r)/2);for(var y=5,p=[],v=0;v<y;v++){var m=v/(y-1),g=(1-m)*(1-m)*e+2*m*(1-m)*i+m*m*n,w=(1-m)*(1-m)*a+2*m*(1-m)*s+m*m*r,P=h+(this.radius-h)/y*v;if(p.push({x:g,y:w,r:P}),3==p.length){var T=this.ctaCalc(p[0].x,p[0].y,p[0].r,p[1].x,p[1].y,p[1].r,p[2].x,p[2].y,p[2].r);T[0].color=this.lineColor,this.bethelDraw(T,1),p=[{x:g,y:w,r:P}]}}this.currentLine=t}},distance:function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)},ctaCalc:function(t,e,i,n,a,s,r,c,o){var u,h,l,f,x,d,y,p,v,m=[];u=n-t,h=a-e,l=2*Math.sqrt(u*u+h*h+1e-4),u=u/l*i,h=h/l*i,f=h,x=-u,d=n-r,y=a-c,l=2*Math.sqrt(d*d+y*y+1e-4),d=d/l*o,y=y/l*o,p=-y,v=d,m.push({mx:t+f,my:e+x,color:"#1A1A1A"}),m.push({c1x:n+f,c1y:a+x,c2x:n+p,c2y:a+v,ex:r+p,ey:c+v}),m.push({c1x:r+p-d,c1y:c+v-y,c2x:r-p-d,c2y:c-v-y,ex:r-p,ey:c-v}),m.push({c1x:n-p,c1y:a-v,c2x:n-f,c2y:a-x,ex:t-f,ey:e-x}),m.push({c1x:t-f-u,c1y:e-x-h,c2x:t+f-u,c2y:e+x-h,ex:t+f,ey:e+x}),m[0].mx=m[0].mx.toFixed(1),m[0].mx=parseFloat(m[0].mx),m[0].my=m[0].my.toFixed(1),m[0].my=parseFloat(m[0].my);for(var g=1;g<m.length;g++)m[g].c1x=m[g].c1x.toFixed(1),m[g].c1x=parseFloat(m[g].c1x),m[g].c1y=m[g].c1y.toFixed(1),m[g].c1y=parseFloat(m[g].c1y),m[g].c2x=m[g].c2x.toFixed(1),m[g].c2x=parseFloat(m[g].c2x),m[g].c2y=m[g].c2y.toFixed(1),m[g].c2y=parseFloat(m[g].c2y),m[g].ex=m[g].ex.toFixed(1),m[g].ex=parseFloat(m[g].ex),m[g].ey=m[g].ey.toFixed(1),m[g].ey=parseFloat(m[g].ey);return m},bethelDraw:function(t,e,i){var n=this.ctx;n.beginPath(),n.moveTo(t[0].mx,t[0].my),void 0!=i?(n.setFillStyle(i),n.setStrokeStyle(i)):(n.setFillStyle(t[0].color),n.setStrokeStyle(t[0].color));for(var a=1;a<t.length;a++)n.bezierCurveTo(t[a].c1x,t[a].c1y,t[a].c2x,t[a].c2y,t[a].ex,t[a].ey);n.stroke(),void 0!=e&&n.fill(),n.draw(!0)},selectColorEvent:function(t,e){this.selectColor=t,this.lineColor=e},canvasToImg:function(t){this.ctx.draw(!0,(function(){wx.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(e){wx.showToast({title:"执行了吗？"}),t(e.tempFilePath)}})}))},subCanvas:function(){this.ctx.draw(!0,(function(){wx.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){wx.showToast({title:"以保存"}),wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){wx.showToast({title:"已成功保存到相册",duration:2e3})}})}})}))},saveCanvasAsImg:function(){wx.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){wx.showToast({title:"已保存到相册",duration:2e3})}})}})},previewCanvasImg:function(){wx.canvasToTempFilePath({canvasId:"handWriting",fileType:"jpg",quality:1,success:function(t){wx.previewImage({urls:[t.tempFilePath]})}})},uploadCanvasImg:function(){wx.canvasToTempFilePath({canvasId:"handWriting",fileType:"png",quality:1,success:function(t){wx.uploadFile({url:"https://example.weixin.qq.com/upload",filePath:t.tempFilePath,name:"file_signature",formData:{user:"test"},success:function(t){t.data}})}})},setCanvasBg:function(t){this.ctx.rect(0,0,this.canvasWidth,this.canvasHeight-4),this.ctx.setFillStyle(t),this.ctx.fill(),this.ctx.draw()}}};e.default=n},241:
/*!********************************************************************************************************!*\
  !*** /Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue?vue&type=style&index=0&lang=css& ***!
  \********************************************************************************************************/
/*! no static exports found */function(t,e,i){"use strict";i.r(e);var n=i(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sign.vue?vue&type=style&index=0&lang=css& */242),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},242:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/zhoukaiwen/Desktop/个人项目/宅家学IT/zjx/tn_components/sign.vue?vue&type=style&index=0&lang=css& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,i){}},[[235,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/tn_components/sign.js.map